{"ast":null,"code":"import React,{useState,useEffect}from'react';import PaymentForm from'../components/PaymentForm';import{auth}from'../firebase';// Ensure this path matches your firebase setup\nimport{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[transactions,setTransactions]=useState([]);const[error,setError]=useState(null);const navigate=useNavigate();// Handle logout\nconst handleLogout=async()=>{try{await auth.signOut();navigate('/login');// Redirect to login after logout\n}catch(err){console.error('Error logging out:',err);}};useEffect(()=>{const fetchTransactions=async()=>{try{const response=await fetch(process.env.REACT_APP_API_BASE_URL||'https://ziagg50mj8.execute-api.us-east-1.amazonaws.com/default/transactionsHandler');if(!response.ok){throw new Error('Failed to fetch transactions');}const data=await response.json();setTransactions(data);}catch(err){console.error('Error fetching transactions:',err);setError('Error fetching transactions');}};fetchTransactions();},[]);const onAddTransaction=async transaction=>{try{const response=await fetch(process.env.REACT_APP_API_BASE_URL||'https://ziagg50mj8.execute-api.us-east-1.amazonaws.com/default/transactionsHandler',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(transaction)});if(!response.ok){throw new Error('Failed to add transaction');}const newTransaction=await response.json();setTransactions(prevTransactions=>[...prevTransactions,newTransaction]);}catch(err){console.error('Error adding transaction:',err);setError('Error adding transaction');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard bg-gray-100 min-h-screen p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-primary\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-primary mb-4\",children:\"Add a Transaction\"}),/*#__PURE__*/_jsx(PaymentForm,{onAddTransaction:onAddTransaction})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-primary mb-4\",children:\"Transaction History\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:error}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-200\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2 text-left\",children:\"Recipient\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2 text-left\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2 text-left\",children:\"Method\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2 text-left\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'bg-gray-50':'bg-white',children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.recipient}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.amount}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.method}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleString()})]},transaction.id))})]})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","PaymentForm","auth","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","transactions","setTransactions","error","setError","navigate","handleLogout","signOut","err","console","fetchTransactions","response","fetch","process","env","REACT_APP_API_BASE_URL","ok","Error","data","json","onAddTransaction","transaction","method","headers","body","JSON","stringify","newTransaction","prevTransactions","className","children","onClick","map","index","recipient","amount","Date","date","toLocaleString","id"],"sources":["/Users/navidahmed/Lab/wlth-pay-lite/src/pages/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PaymentForm from '../components/PaymentForm';\nimport { auth } from '../firebase'; // Ensure this path matches your firebase setup\nimport { useNavigate } from 'react-router-dom';\n\ninterface Transaction {\n  id: string;\n  recipient: string;\n  amount: number;\n  method: string;\n  date: string;\n}\n\nconst Dashboard: React.FC = () => {\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const navigate = useNavigate();\n\n  // Handle logout\n  const handleLogout = async () => {\n    try {\n      await auth.signOut();\n      navigate('/login'); // Redirect to login after logout\n    } catch (err) {\n      console.error('Error logging out:', err);\n    }\n  };\n\n  useEffect(() => {\n    const fetchTransactions = async () => {\n      try {\n        const response = await fetch(\n          process.env.REACT_APP_API_BASE_URL ||\n            'https://ziagg50mj8.execute-api.us-east-1.amazonaws.com/default/transactionsHandler',\n        );\n\n        if (!response.ok) {\n          throw new Error('Failed to fetch transactions');\n        }\n\n        const data = await response.json();\n        setTransactions(data);\n      } catch (err) {\n        console.error('Error fetching transactions:', err);\n        setError('Error fetching transactions');\n      }\n    };\n\n    fetchTransactions();\n  }, []);\n\n  const onAddTransaction = async (transaction: Transaction) => {\n    try {\n      const response = await fetch(\n        process.env.REACT_APP_API_BASE_URL ||\n          'https://ziagg50mj8.execute-api.us-east-1.amazonaws.com/default/transactionsHandler',\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(transaction),\n        },\n      );\n\n      if (!response.ok) {\n        throw new Error('Failed to add transaction');\n      }\n\n      const newTransaction = await response.json();\n      setTransactions((prevTransactions) => [...prevTransactions, newTransaction]);\n    } catch (err) {\n      console.error('Error adding transaction:', err);\n      setError('Error adding transaction');\n    }\n  };\n\n  return (\n    <div className=\"dashboard bg-gray-100 min-h-screen p-6\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-4xl font-bold text-primary\">Dashboard</h1>\n        <button\n          onClick={handleLogout}\n          className=\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600\"\n        >\n          Logout\n        </button>\n      </div>\n      <div className=\"dashboard-content grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto\">\n        <div className=\"dashboard-section bg-white p-6 rounded-lg shadow-lg\">\n          <h2 className=\"text-2xl font-semibold text-primary mb-4\">Add a Transaction</h2>\n          <PaymentForm onAddTransaction={onAddTransaction} />\n        </div>\n        <div className=\"dashboard-section bg-white p-6 rounded-lg shadow-lg\">\n          <h2 className=\"text-2xl font-semibold text-primary mb-4\">Transaction History</h2>\n          {error && <p className=\"text-red-600 mb-4\">{error}</p>}\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-200\">\n                <th className=\"border border-gray-300 p-2 text-left\">Recipient</th>\n                <th className=\"border border-gray-300 p-2 text-left\">Amount</th>\n                <th className=\"border border-gray-300 p-2 text-left\">Method</th>\n                <th className=\"border border-gray-300 p-2 text-left\">Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              {transactions.map((transaction, index) => (\n                <tr\n                  key={transaction.id}\n                  className={index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}\n                >\n                  <td className=\"border border-gray-300 p-2\">{transaction.recipient}</td>\n                  <td className=\"border border-gray-300 p-2\">{transaction.amount}</td>\n                  <td className=\"border border-gray-300 p-2\">{transaction.method}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(transaction.date).toLocaleString()}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,OAASC,IAAI,KAAQ,aAAa,CAAE;AACpC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAU/C,KAAM,CAAAC,SAAmB,CAAGA,CAAA,GAAM,CAChC,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGX,QAAQ,CAAgB,EAAE,CAAC,CACnE,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAAAc,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B;AACA,KAAM,CAAAW,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAZ,IAAI,CAACa,OAAO,CAAC,CAAC,CACpBF,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACtB,CAAE,MAAOG,GAAG,CAAE,CACZC,OAAO,CAACN,KAAK,CAAC,oBAAoB,CAAEK,GAAG,CAAC,CAC1C,CACF,CAAC,CAEDhB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC1BC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAChC,oFACJ,CAAC,CAED,GAAI,CAACJ,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,8BAA8B,CAAC,CACjD,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCjB,eAAe,CAACgB,IAAI,CAAC,CACvB,CAAE,MAAOV,GAAG,CAAE,CACZC,OAAO,CAACN,KAAK,CAAC,8BAA8B,CAAEK,GAAG,CAAC,CAClDJ,QAAQ,CAAC,6BAA6B,CAAC,CACzC,CACF,CAAC,CAEDM,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAU,gBAAgB,CAAG,KAAO,CAAAC,WAAwB,EAAK,CAC3D,GAAI,CACF,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC1BC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAChC,oFAAoF,CACtF,CACEO,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACL,WAAW,CAClC,CACF,CAAC,CAED,GAAI,CAACV,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CAEA,KAAM,CAAAU,cAAc,CAAG,KAAM,CAAAhB,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAC5CjB,eAAe,CAAE0B,gBAAgB,EAAK,CAAC,GAAGA,gBAAgB,CAAED,cAAc,CAAC,CAAC,CAC9E,CAAE,MAAOnB,GAAG,CAAE,CACZC,OAAO,CAACN,KAAK,CAAC,2BAA2B,CAAEK,GAAG,CAAC,CAC/CJ,QAAQ,CAAC,0BAA0B,CAAC,CACtC,CACF,CAAC,CAED,mBACEL,KAAA,QAAK8B,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD/B,KAAA,QAAK8B,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDjC,IAAA,OAAIgC,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cAC9DjC,IAAA,WACEkC,OAAO,CAAEzB,YAAa,CACtBuB,SAAS,CAAC,0DAA0D,CAAAC,QAAA,CACrE,QAED,CAAQ,CAAC,EACN,CAAC,cACN/B,KAAA,QAAK8B,SAAS,CAAC,2EAA2E,CAAAC,QAAA,eACxF/B,KAAA,QAAK8B,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClEjC,IAAA,OAAIgC,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC/EjC,IAAA,CAACJ,WAAW,EAAC2B,gBAAgB,CAAEA,gBAAiB,CAAE,CAAC,EAChD,CAAC,cACNrB,KAAA,QAAK8B,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClEjC,IAAA,OAAIgC,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,CAChF3B,KAAK,eAAIN,IAAA,MAAGgC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAE3B,KAAK,CAAI,CAAC,cACtDJ,KAAA,UAAO8B,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC9DjC,IAAA,UAAAiC,QAAA,cACE/B,KAAA,OAAI8B,SAAS,CAAC,aAAa,CAAAC,QAAA,eACzBjC,IAAA,OAAIgC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cACnEjC,IAAA,OAAIgC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,QAAM,CAAI,CAAC,cAChEjC,IAAA,OAAIgC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,QAAM,CAAI,CAAC,cAChEjC,IAAA,OAAIgC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,MAAI,CAAI,CAAC,EAC5D,CAAC,CACA,CAAC,cACRjC,IAAA,UAAAiC,QAAA,CACG7B,YAAY,CAAC+B,GAAG,CAAC,CAACX,WAAW,CAAEY,KAAK,gBACnClC,KAAA,OAEE8B,SAAS,CAAEI,KAAK,CAAG,CAAC,GAAK,CAAC,CAAG,YAAY,CAAG,UAAW,CAAAH,QAAA,eAEvDjC,IAAA,OAAIgC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAET,WAAW,CAACa,SAAS,CAAK,CAAC,cACvErC,IAAA,OAAIgC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAET,WAAW,CAACc,MAAM,CAAK,CAAC,cACpEtC,IAAA,OAAIgC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAET,WAAW,CAACC,MAAM,CAAK,CAAC,cACpEzB,IAAA,OAAIgC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACvC,GAAI,CAAAM,IAAI,CAACf,WAAW,CAACgB,IAAI,CAAC,CAACC,cAAc,CAAC,CAAC,CAC1C,CAAC,GARAjB,WAAW,CAACkB,EASf,CACL,CAAC,CACG,CAAC,EACH,CAAC,EACL,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}