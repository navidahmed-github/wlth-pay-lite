{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import PaymentForm from\"../components/PaymentForm\";import{auth}from\"../firebase\";// Ensure this path matches your firebase setup\nimport{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[transactions,setTransactions]=useState([]);const[error,setError]=useState(null);const navigate=useNavigate();const API_URL=process.env.REACT_APP_API_BASE_URL||\"\";const BEARER_TOKEN=process.env.REACT_APP_BEARER_TOKEN||\"\";// Handle logout\nconst handleLogout=async()=>{try{await auth.signOut();navigate(\"/login\");// Redirect to login after logout\n}catch(err){console.error(\"Error logging out:\",err);}};useEffect(()=>{const fetchTransactions=async()=>{try{const response=await fetch(API_URL,{method:\"GET\",headers:{Authorization:\"Bearer \".concat(BEARER_TOKEN)}});if(!response.ok){throw new Error(\"Failed to fetch transactions\");}const data=await response.json();setTransactions(data);}catch(err){console.error(\"Error fetching transactions:\",err);setError(\"Error fetching transactions\");}};fetchTransactions();},[API_URL,BEARER_TOKEN]);const onAddTransaction=async transaction=>{try{const response=await fetch(API_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(BEARER_TOKEN)},body:JSON.stringify(transaction)});if(!response.ok){throw new Error(\"Failed to add transaction\");}const newTransaction=await response.json();setTransactions(prevTransactions=>[...prevTransactions,newTransaction]);}catch(err){console.error(\"Error adding transaction:\",err);setError(\"Error adding transaction\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard bg-gray-100 min-h-screen p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-primary\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-primary mb-4\",children:\"Add a Transaction\"}),/*#__PURE__*/_jsx(PaymentForm,{onAddTransaction:onAddTransaction})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section bg-white p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-primary mb-4\",children:\"Transaction History\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:error}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-200\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2 text-left\",children:\"Recipient\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2 text-left\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2 text-left\",children:\"Method\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 p-2 text-left\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?\"bg-gray-50\":\"bg-white\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.recipient}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.amount}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:transaction.method}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 p-2\",children:new Date(transaction.date).toLocaleString()})]},transaction.id))})]})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","PaymentForm","auth","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","transactions","setTransactions","error","setError","navigate","API_URL","process","env","REACT_APP_API_BASE_URL","BEARER_TOKEN","REACT_APP_BEARER_TOKEN","handleLogout","signOut","err","console","fetchTransactions","response","fetch","method","headers","Authorization","concat","ok","Error","data","json","onAddTransaction","transaction","body","JSON","stringify","newTransaction","prevTransactions","className","children","onClick","map","index","recipient","amount","Date","date","toLocaleString","id"],"sources":["/Users/navidahmed/Lab/wlth-pay-lite/frontend/src/pages/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PaymentForm from \"../components/PaymentForm\";\nimport { auth } from \"../firebase\"; // Ensure this path matches your firebase setup\nimport { useNavigate } from \"react-router-dom\";\n\ninterface Transaction {\n  id: string;\n  recipient: string;\n  amount: number;\n  method: string;\n  date: string;\n}\n\nconst Dashboard: React.FC = () => {\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const navigate = useNavigate();\n\n  const API_URL = process.env.REACT_APP_API_BASE_URL || \"\";\n  const BEARER_TOKEN = process.env.REACT_APP_BEARER_TOKEN || \"\";\n\n  // Handle logout\n  const handleLogout = async () => {\n    try {\n      await auth.signOut();\n      navigate(\"/login\"); // Redirect to login after logout\n    } catch (err) {\n      console.error(\"Error logging out:\", err);\n    }\n  };\n\n  useEffect(() => {\n    const fetchTransactions = async () => {\n      try {\n        const response = await fetch(API_URL, {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${BEARER_TOKEN}`,\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch transactions\");\n        }\n\n        const data = await response.json();\n        setTransactions(data);\n      } catch (err) {\n        console.error(\"Error fetching transactions:\", err);\n        setError(\"Error fetching transactions\");\n      }\n    };\n\n    fetchTransactions();\n  }, [API_URL, BEARER_TOKEN]);\n\n  const onAddTransaction = async (transaction: Partial<Transaction>) => {\n    try {\n      const response = await fetch(API_URL, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${BEARER_TOKEN}`,\n        },\n        body: JSON.stringify(transaction),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to add transaction\");\n      }\n\n      const newTransaction = await response.json();\n      setTransactions((prevTransactions) => [...prevTransactions, newTransaction]);\n    } catch (err) {\n      console.error(\"Error adding transaction:\", err);\n      setError(\"Error adding transaction\");\n    }\n  };\n\n  return (\n    <div className=\"dashboard bg-gray-100 min-h-screen p-6\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-4xl font-bold text-primary\">Dashboard</h1>\n        <button\n          onClick={handleLogout}\n          className=\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600\"\n        >\n          Logout\n        </button>\n      </div>\n      <div className=\"dashboard-content grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto\">\n        <div className=\"dashboard-section bg-white p-6 rounded-lg shadow-lg\">\n          <h2 className=\"text-2xl font-semibold text-primary mb-4\">Add a Transaction</h2>\n          <PaymentForm onAddTransaction={onAddTransaction} />\n        </div>\n        <div className=\"dashboard-section bg-white p-6 rounded-lg shadow-lg\">\n          <h2 className=\"text-2xl font-semibold text-primary mb-4\">Transaction History</h2>\n          {error && <p className=\"text-red-600 mb-4\">{error}</p>}\n          <table className=\"w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-gray-200\">\n                <th className=\"border border-gray-300 p-2 text-left\">Recipient</th>\n                <th className=\"border border-gray-300 p-2 text-left\">Amount</th>\n                <th className=\"border border-gray-300 p-2 text-left\">Method</th>\n                <th className=\"border border-gray-300 p-2 text-left\">Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              {transactions.map((transaction, index) => (\n                <tr\n                  key={transaction.id}\n                  className={index % 2 === 0 ? \"bg-gray-50\" : \"bg-white\"}\n                >\n                  <td className=\"border border-gray-300 p-2\">{transaction.recipient}</td>\n                  <td className=\"border border-gray-300 p-2\">{transaction.amount}</td>\n                  <td className=\"border border-gray-300 p-2\">{transaction.method}</td>\n                  <td className=\"border border-gray-300 p-2\">\n                    {new Date(transaction.date).toLocaleString()}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}